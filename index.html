<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <link rel="stylesheet" href="./style.css">

    <title>Simple Liker</title>
  </head>
  <body>
    <div id="modal" class="hidden">
      <h2>Error!</h2>
      <p id="modal-message"></p>
    </div>

    <header>
      <h1>Simple Liker</h1>
    </header>
    <article class="media-post" id="201811189">
      <header>
        <h2> <span>Byron Flatiron</span> says:</h2>
      </header>
      <p>Practice your JavaScript!</p>
      <footer>
        <ul>
          <li class="like">Like! <span class="like-glyph">&#x2661;</span></li>
        </ul>
      </footer>
    </article>
    <article class="media-post" id="201811190">
      <header>
        <h2> <span>Rashaun Flatiron</span> says:</h2>
      </header>
      <p>Practice your Ruby!</p>
      <footer>
        <ul>
          <li class="like">Like! <span class="like-glyph">&#x2661;</span></li>
        </ul>
      </footer>
    </article>
    <article class="media-post" id="201811191">
      <header>
        <h2> <span>Matt Flatiron</span> says:</h2>
      </header>
      <p>Practice your Python!</p>
      <footer>
        <ul>
          <li class="like">Like! <span class="like-glyph">&#x2661;</span></li>
        </ul>
      </footer>
    </article>
    <article class="media-post" id="201811192">
      <header>
        <h2> <span>Yunchu Flatiron</span> says:</h2>
      </header>
      <p>Practice your Java!</p>
      <footer>
        <ul>
          <li class="like">Like! <span class="like-glyph">&#x2661;</span></li>
        </ul>
      </footer>
    </article>
    <article class="media-post" id="201811193">
      <header>
        <h2> <span>Hussein Flatiron</span> says:</h2>
      </header>
      <p>Practice your Elixr!</p>
      <footer>
        <ul>
          <li class="like">Like! <span class="like-glyph">&#x2661;</span></li>
        </ul>
      </footer>
    </article>
  </body>
  <script src="main.js" charset="utf-8"></script>
</html>

document.addEventListener('DOMContentLoaded', () => {
  // Step 1: Add the `.hidden` class to the error modal in the HTML
  const errorModal = document.getElementById('modal');
  errorModal.classList.add('hidden');

  // Step 2: Add an event listener to the like button
  const likeButton = document.querySelector('.like');
  likeButton.addEventListener('click', () => {
    // Step 2a: Invoke `mimicServerCall` to simulate making a server request
    mimicServerCall()
      .then(() => {
        // Step 2c: When the "server" returns a success status
        // Change the heart to a full heart
        likeButton.classList.add('activated-heart');
      })
      .catch(() => {
        // Step 2b: When the "server" returns a failure status
        // Display the error modal
        errorModal.classList.remove('hidden');
        // Display the server error message in the modal
        const modalMessage = document.getElementById('modal-message');
        modalMessage.textContent = 'Server error message goes here';

        // Use `setTimeout` to hide the modal after 3 seconds
        setTimeout(() => {
          errorModal.classList.add('hidden');
        }, 3000);
      });
  });

  // Step 3: Add an event listener to the activated heart
  likeButton.addEventListener('click', () => {
    // Change the heart back to an empty heart
    likeButton.classList.remove('activated-heart');
  });
});